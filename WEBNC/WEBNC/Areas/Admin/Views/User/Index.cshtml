<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <h3 class="fw-bold mb-0">Quản lý người dùng</h3>
            <small class="text-muted">Quản lý tài khoản, vai trò và trạng thái người dùng</small>
        </div>

        <a href="/Admin/User/Create" class="btn btn-primary">
            <i class="fa-solid fa-user-plus me-1"></i>
            Thêm người dùng
        </a>
    </div>
    <div class="card shadow-sm">
        <div class="card-body">

            <table id="tblUsers"
                   class="table table-hover align-middle table-bordered w-100">
                <thead class="table-light">
                    <tr>
                        <th>Tài khoản</th>
                        <th>Email</th>
                        <th class="text-center">Vai trò</th>
                        <th class="text-center">OTP</th>
                        <th class="text-center">Trạng thái</th>
                    </tr>
                </thead>
            </table>

        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<script>
    $(document).ready(function () {
        $('#tblUsers').DataTable({
            ajax: {
                url: '/api/admin/users',
                dataSrc: ''
            },
            columns: [
                { data: 'userName' },
                { data: 'email' },
                {
                    data: 'role',
                    render: role => role
                        ? `<span class="badge bg-primary">${role}</span>`
                        : `<span class="badge bg-secondary">User</span>`
                },
                {
                    data: 'isOtpVerified',
                    render: v => v
                        ? `<span class="badge bg-success">Đã xác thực</span>`
                        : `<span class="badge bg-warning">Chưa xác thực</span>`
                },
                {
                    data: 'emailConfirmed',
                    render: v => v
                        ? `<span class="badge bg-success">Active</span>`
                        : `<span class="badge bg-danger">Inactive</span>`
                }
            ]
        });
    });
</script>
